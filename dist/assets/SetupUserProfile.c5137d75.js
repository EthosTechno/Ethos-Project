import{I as k}from"./InputGroup.289a36f5.js";import{B as F}from"./ButtonBase.34bd080f.js";import{_ as $,a9 as x,u as l,ae as f,r as g,o as a,c as n,a as t,w as V,n as p,g as v,e as w,F as _,f as P,d as S,h as B,t as y,p as I,i as C,j as U}from"./index.07cdec20.js";import{c as m,u as E,m as c,r as L,s as R}from"./messages.d52f21eb.js";import{s as h}from"./setup-profile.service.764f2c62.js";import"./InputText.386db282.js";/* empty css                                                              */const q={components:{InputGroup:k,ButtonBase:F,setupProfileSvc:h},setup(){const o=m.regex(/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#`~()_+={}[\]?!@$%^&|\\:;"'<>,.?/'";"*-]).{8,}$/),s=x();return{v$:E(),alpha:o,route:s}},data(){return{loginForm:{password:"",confirmPassword:""},submitStatus:null,showPassword:!1,isExpiredLink:!1}},validations(){return{loginForm:{password:{required:m.withMessage(c.password_required,L),alpha:m.withMessage(c.password_valid,this.alpha)},confirmPassword:{sameAsPassword:m.withMessage(c.confirm_password,R(this.loginForm.password))}}}},methods:{toggleShow(){this.showPassword=!this.showPassword},handleSubmit(){if(this.v$.$touch(),this.v$.$invalid)this.submitStatus="ERROR";else{const o={userId:this.route.params.id,password:this.loginForm.password,confirmPassword:this.loginForm.confirmPassword};h.updateUserPassword(o).then(s=>{l().success(s.data,{timeout:5e3}),f.push("/")}).catch(s=>{s.response.status===404?l().error("Invalid URL request",{timeout:3e3}):s.response.status==401?(l().error("Your session is expired. Please login again.",{timeout:3e3}),localStorage.removeItem("user"),f.push("sign-in")):s.response.status==400?l().error(s.response.data.Errors[0],{timeout:3e3}):s.response.status==500&&l().error("Sorry something went wrong",{timeout:3e3}),reject(s)})}}},beforeCreate(){h.checkUserEmailConfirm(this.route.params.id).then(o=>{this.isExpiredLink=o.data.data})}},K=o=>(I("data-v-7c10d0ad"),o=o(),C(),o),M={class:"SignInView"},A={class:"Form"},G={key:0,class:"__title expired-link-title"},N={key:1},j=K(()=>t("div",{class:"__title create-pass-title"},"Create a Password",-1)),z={class:"icon is-small is-right"},T={class:"error-msg"},Y={class:"error-msg"},D=U(" Save Password ");function O(o,s,Z,r,d,i){const u=g("InputGroup"),b=g("ButtonBase");return a(),n("div",M,[t("div",A,[d.isExpiredLink?(a(),n("div",G,"Your create password link has expired")):(a(),n("div",N,[j,t("form",{onSubmit:s[7]||(s[7]=V((...e)=>i.handleSubmit&&i.handleSubmit(...e),["prevent"]))},[t("div",{class:p(["inputs",{error:r.v$.loginForm.password.$errors.length}])},[d.showPassword?(a(),v(u,{key:0,onKeyup:s[0]||(s[0]=w(e=>i.handleSubmit(),["enter"])),label:"Password *",modelValue:r.v$.loginForm.password.$model,"onUpdate:modelValue":s[1]||(s[1]=e=>r.v$.loginForm.password.$model=e),"input-props":{type:"text",placeholder:"Password",complete:"off"}},null,8,["modelValue"])):(a(),v(u,{key:1,label:"Password *",onKeyup:s[2]||(s[2]=w(e=>i.handleSubmit(),["enter"])),modelValue:r.v$.loginForm.password.$model,"onUpdate:modelValue":s[3]||(s[3]=e=>r.v$.loginForm.password.$model=e),"input-props":{type:"password",placeholder:"Password",complete:"off"}},null,8,["modelValue"])),t("button",{type:"button",class:"button",onClick:s[4]||(s[4]=(...e)=>i.toggleShow&&i.toggleShow(...e))},[t("span",z,[t("i",{class:p(["fa",{"fa-eye-slash":d.showPassword,"fa-eye":!d.showPassword}])},null,2)])]),(a(!0),n(_,null,P(r.v$.loginForm.password.$errors,e=>(a(),n("div",{class:"input-errors",key:e.$uid},[t("div",T,y(e.$message),1)]))),128))],2),t("div",{class:p(["inputs",{error:r.v$.loginForm.confirmPassword.$errors.length}])},[S(u,{onKeyup:s[5]||(s[5]=w(e=>i.handleSubmit(),["enter"])),label:"Confirm Password *",modelValue:r.v$.loginForm.confirmPassword.$model,"onUpdate:modelValue":s[6]||(s[6]=e=>r.v$.loginForm.confirmPassword.$model=e),"input-props":{type:"password",placeholder:"Confirm Password"}},null,8,["modelValue"]),(a(!0),n(_,null,P(r.v$.loginForm.confirmPassword.$errors,e=>(a(),n("div",{class:"input-errors",key:e.$uid},[t("div",Y,y(e.$message),1)]))),128))],2),S(b,{class:"__ButtonBase",onClick:i.handleSubmit},{default:B(()=>[D]),_:1},8,["onClick"])],32)]))])])}var os=$(q,[["render",O],["__scopeId","data-v-7c10d0ad"]]);export{os as default};
