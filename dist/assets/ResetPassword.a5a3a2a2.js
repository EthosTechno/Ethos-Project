import{I as b}from"./InputGroup.289a36f5.js";import{B as F}from"./ButtonBase.34bd080f.js";import{c as d,u as V,m as p,r as x,s as $}from"./messages.d52f21eb.js";import{_ as B,a9 as C,u as m,ae as f,r as v,o as t,c as n,a,t as w,b as I,w as R,n as c,g as _,e as h,F as P,f as k,d as y,h as M,p as E,i as L,j as U}from"./index.07cdec20.js";import{s as g}from"./setup-profile.service.764f2c62.js";import"./InputText.386db282.js";/* empty css                                                              */const q={components:{InputGroup:b,ButtonBase:F,setupProfileSvc:g},setup(){const o=d.regex(/^(?=.*?[A-Z])(?=.*?[a-z])(?=.*?[0-9])(?=.*?[#`~()_+={}[\]?!@$%^&|\\:;"'<>,.?/'";"*-]).{8,}$/),s=C();return{v$:V(),alpha:o,route:s}},data(){return{loginForm:{password:"",confirmPassword:""},submitStatus:null,showPassword:!1,isExpiredLink:!1,errorMsg:!1}},validations(){return{loginForm:{password:{required:d.withMessage(p.password_required,x),alpha:d.withMessage(p.password_valid,this.alpha)},confirmPassword:{sameAsPassword:d.withMessage(p.confirm_password,$(this.loginForm.password))}}}},methods:{toggleShow(){this.showPassword=!this.showPassword},handleSubmit(){if(this.v$.$touch(),this.v$.$invalid)this.submitStatus="ERROR";else{const o={resetToken:this.route.params.token,password:this.loginForm.password,confirmPassword:this.loginForm.confirmPassword};g.ResetUserPassword(o).then(s=>{m().success(s.data,{timeout:5e3}),f.push("/sign-in")}).catch(s=>{s.response.status===404?m().error("Invalid URL request",{timeout:3e3}):s.response.status==401?(m().error("Your session is expired. Please login again.",{timeout:3e3}),localStorage.removeItem("user"),f.push("sign-in")):s.response.status==400?this.errorMsg=s.response.data.Errors[0]:s.response.status==500&&m().error("Sorry something went wrong",{timeout:3e3})})}}},beforeCreate(){g.CheckResetPasswordLink(this.route.params.token).then(o=>{this.isExpiredLink=o.data})}},K=o=>(E("data-v-eea59d1c"),o=o(),L(),o),N={class:"SignInView"},A={class:"Form"},G={key:0,class:"__title expired-link-title"},T={key:1},z=K(()=>a("div",{class:"__title create-pass-title"},"Reset Password",-1)),Y={key:0,class:"toster-msg"},j={class:"icon is-small is-right"},D={class:"error-msg"},O={class:"error-msg"},Z=U(" Save Password ");function H(o,s,J,r,l,i){const u=v("InputGroup"),S=v("ButtonBase");return t(),n("div",N,[a("div",A,[l.isExpiredLink?(t(),n("div",G,"Your reset password link has expired")):(t(),n("div",T,[z,l.errorMsg?(t(),n("span",Y,w(l.errorMsg),1)):I("",!0),a("form",{onSubmit:s[7]||(s[7]=R((...e)=>i.handleSubmit&&i.handleSubmit(...e),["prevent"]))},[a("div",{class:c(["inputs",{error:r.v$.loginForm.password.$errors.length}])},[l.showPassword?(t(),_(u,{key:0,onKeyup:s[0]||(s[0]=h(e=>i.handleSubmit(),["enter"])),label:"Password *",modelValue:r.v$.loginForm.password.$model,"onUpdate:modelValue":s[1]||(s[1]=e=>r.v$.loginForm.password.$model=e),"input-props":{type:"text",placeholder:"Password",complete:"off"}},null,8,["modelValue"])):(t(),_(u,{key:1,label:"Password *",onKeyup:s[2]||(s[2]=h(e=>i.handleSubmit(),["enter"])),modelValue:r.v$.loginForm.password.$model,"onUpdate:modelValue":s[3]||(s[3]=e=>r.v$.loginForm.password.$model=e),"input-props":{type:"password",placeholder:"Password",complete:"off"}},null,8,["modelValue"])),a("button",{type:"button",class:"button",onClick:s[4]||(s[4]=(...e)=>i.toggleShow&&i.toggleShow(...e))},[a("span",j,[a("i",{class:c(["fa",{"fa-eye-slash":l.showPassword,"fa-eye":!l.showPassword}])},null,2)])]),(t(!0),n(P,null,k(r.v$.loginForm.password.$errors,e=>(t(),n("div",{class:"input-errors",key:e.$uid},[a("div",D,w(e.$message),1)]))),128))],2),a("div",{class:c(["inputs",{error:r.v$.loginForm.confirmPassword.$errors.length}])},[y(u,{onKeyup:s[5]||(s[5]=h(e=>i.handleSubmit(),["enter"])),label:"Confirm Password *",modelValue:r.v$.loginForm.confirmPassword.$model,"onUpdate:modelValue":s[6]||(s[6]=e=>r.v$.loginForm.confirmPassword.$model=e),"input-props":{type:"password",placeholder:"Confirm Password"}},null,8,["modelValue"]),(t(!0),n(P,null,k(r.v$.loginForm.confirmPassword.$errors,e=>(t(),n("div",{class:"input-errors",key:e.$uid},[a("div",O,w(e.$message),1)]))),128))],2),y(S,{class:"__ButtonBase",onClick:i.handleSubmit},{default:M(()=>[Z]),_:1},8,["onClick"])],32)]))])])}var ts=B(q,[["render",H],["__scopeId","data-v-eea59d1c"]]);export{ts as default};
