import{_ as T,q as m,N,o as r,c as i,a as o,O as S,n as R,j as I,t as b,b as x,L as V,M as O,d as P,e as j,F as C,f as z,g as F,R as L,p as E,i as D,a8 as M}from"./index.07cdec20.js";import{I as G}from"./InputText.386db282.js";import{f as K,P as U}from"./Pagination.1b6dd668.js";import{I as q}from"./InputSelect.c294259d.js";import{d as X}from"./dashboard.service.657ada9a.js";import{H as k}from"./http.5479f9b0.js";/* empty css                                                                *//* empty css                                                              */var J="/assets/save-referral-report.fe3b393e.svg";const Q={key:"header-customer"},W={key:0},Y={key:"header-email"},Z={key:"header-phone"},ee={key:"header-open-date"},te={key:"header-status"},ae={__name:"explorereferrals-row",props:{portal:{type:Object,default:Object},isHeaderRow:{type:Boolean,default:!1}},setup(e){const d=e,v=m(!1),f=t=>{if(t)if(t.length==10){var l=t.match(/(\d{3})(\d{3})(\d{4})/);return l="("+l[1]+") "+l[2]+"-"+l[3],l}else return t.length>10,t;else return t},w=t=>{const l=[{status:"Active",color:"#30E694"},{status:"Inactive",color:"#F4F4F4"}],g=l.find(h=>h.status===t);return g?g.color:l[0].color},$=t=>{t.length>50&&(v.value=!0)},p=t=>{t.length>50&&(v.value=!1)},u=t=>({backgroundColor:`${w(t)}`}),_=t=>t===d.activeSortKey;return(t,l)=>{const g=N("tooltip");return r(),i("div",{class:R(["PortalsTableRow",{isHeaderRow:e.isHeaderRow}])},[o("div",{class:R(["__cell __cell-neme",{isActive:_("Name")}])},[S((r(),i("span",{class:R(v.value?"tooltip":""),onMouseenter:l[0]||(l[0]=h=>$(e.portal.customerName)),onMouseleave:l[1]||(l[1]=h=>p(e.portal.customerName))},[I(b(e.portal.customerName),1)],34)),[[g,e.portal.customerName]]),e.isHeaderRow?(r(),i("div",Q," Customer ")):x("",!0)],2),o("div",{class:R(["__cell __cell-id",{isActive:_("PortalID")}])},[e.isHeaderRow?x("",!0):S((r(),i("span",W,[I(b(e.portal.email?e.portal.email:"-"),1)])),[[g,e.portal.email]]),e.isHeaderRow?(r(),i("div",Y,"Email")):x("",!0)],2),o("div",{class:R(["__cell __cell-Stages",{isActive:_("Stages")}])},[o("span",null,b(f(e.portal.phone)),1),e.isHeaderRow?(r(),i("div",Z," Phone ")):x("",!0)],2),o("div",{class:R(["__cell __cell-date",{isActive:_("CreatedOn")}])},[I(b(e.portal.createdOnStr)+" ",1),e.isHeaderRow?(r(),i("div",ee," Date ")):x("",!0)],2),o("div",{class:R(["__cell __cell-status",{isActive:_("Status")}])},[e.isHeaderRow?x("",!0):(r(),i("div",{key:0,class:"__status",style:V(u("Inactive"))},[S((r(),i("span",null,[I(b(e.portal.referralByName),1)])),[[g,e.portal.referralByName]])],4)),e.isHeaderRow?(r(),i("div",te," Referred by ")):x("",!0)],2)],2)}}};var A=T(ae,[["__scopeId","data-v-354b36d4"]]);class se{getExploreReferrals(d){return k.post("Admin/Project/GetAllProjectReferrals",d)}exportReferrals(d){return k.postResType("Admin/Project/ExportProjectReferral",d)}}var y=new se;const oe=e=>(E("data-v-5bac1a3d"),e=e(),D(),e),le={class:"PortalsTable"},re={class:"Controls"},ne={class:"top-part"},ie=["disabled"],ce=oe(()=>o("img",{src:J},null,-1)),de=[ce],ue={class:"__rows row-custom"},ve={class:"__empty"},pe={__name:"explorereferrals-table",setup(e){const d=m(1),v=m(1),f=m(0),w=m(K.perPageData),$=m(1),p=m(3),u=m(""),_=m([]),t=m([]),l={pageNumber:1,pageSize:w.value,searchText:u.value,range:p.value};O(()=>{y.getExploreReferrals(l).then(c=>{const a=c.data;t.value=a.items,d.value=1,v.value=a.totalPages,f.value=a.totalItems,X.GetAllDashboardEnums().then(n=>{_.value=n.data})})});const g=()=>{const c={searchText:u.value,range:p.value};y.exportReferrals(c).then(a=>{const n=document.createElement("a");n.href=window.URL.createObjectURL(new Blob([a.data])),n.setAttribute("download","PortalCX - Referrals.xlsx"),document.body.appendChild(n),n.click()})},h=c=>{u.value=c;const a={pageNumber:1,pageSize:w.value,searchText:c,range:p.value};y.getExploreReferrals(a).then(n=>{const s=n.data;t.value=s.items,d.value=1,v.value=s.totalPages,f.value=s.totalItems})},H=c=>{p.value=c;const a={pageNumber:1,pageSize:w.value,searchText:u.value,range:c};y.getExploreReferrals(a).then(n=>{const s=n.data;t.value=s.items,d.value=1,v.value=s.totalPages,f.value=s.totalItems})},B=c=>{$.value=c;const a={pageNumber:c,pageSize:w.value,searchText:u.value,range:p.value};y.getExploreReferrals(a).then(n=>{const s=n.data;t.value=s.items,d.value=s.pageNumber,v.value=s.totalPages,f.value=s.totalItems})};return(c,a)=>{const n=N("tooltip");return r(),i("div",le,[o("header",re,[P(G,{class:"__search",onKeyup:a[0]||(a[0]=j(s=>h(u.value),["enter"])),modelValue:u.value,"onUpdate:modelValue":a[1]||(a[1]=s=>u.value=s),placeholder:"Search Customer Referrals","icon-leading":"search","icon-trailing":"cancel","onUpdate:resetButton":a[2]||(a[2]=s=>h("")),"onUpdate:searchClick":a[3]||(a[3]=s=>h(u.value))},null,8,["modelValue"]),o("div",ne,[P(q,{modelValue:p.value,"onUpdate:modelValue":[a[4]||(a[4]=s=>p.value=s),a[5]||(a[5]=s=>H(p.value))],options:_.value,"auto-size":"min",placement:"bottom"},null,8,["modelValue","options"]),S((r(),i("a",{disabled:!t.value.length,style:V(t.value.length?"cursor: pointer":""),onClick:g},de,12,ie)),[[n,"Save Referral Report",void 0,{bubble:!0}]])])]),o("div",ue,[P(A,{class:"__header-row","is-header-row":!0}),(r(!0),i(C,null,z(t.value,s=>(r(),F(A,{class:"__row",portal:s,key:s},null,8,["portal"]))),128))]),S(o("div",ve," No results found ",512),[[L,!t.value.length]]),o("div",null,[P(U,{pageName:"Referrals",totalPages:v.value,perPage:10,totalItems:f.value,currentPage:d.value,onPagechanged:B},null,8,["totalPages","totalItems","currentPage"])])])}}};var me=T(pe,[["__scopeId","data-v-5bac1a3d"]]);const _e=e=>(E("data-v-a1ff13fe"),e=e(),D(),e),ge=_e(()=>o("div",{class:"top-part"},[o("div",{class:"StagesView"},[o("div",{class:"title"},"Explore Referrals")])],-1)),fe={class:"table-custom"},he={__name:"ExploreReferralsView",setup(e){return M(),(d,v)=>(r(),i(C,null,[ge,o("div",fe,[P(me)])],64))}};var $e=T(he,[["__scopeId","data-v-a1ff13fe"]]);export{$e as default};
