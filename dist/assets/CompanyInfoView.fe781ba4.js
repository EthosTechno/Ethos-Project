import{I as N}from"./InputGroup.289a36f5.js";import{B as S}from"./ButtonBase.34bd080f.js";import{u as f,c as r,m as i,r as c,e as b}from"./messages.d52f21eb.js";import{_ as V,z as C,u as A,r as v,o as n,c as m,a as s,w as I,n as p,d as l,F as u,f as h,t as g,h as k,j as B}from"./index.07cdec20.js";import{u as _}from"./companySettings.service.6df5152f.js";import"./InputText.386db282.js";/* empty css                                                              */import"./http.5479f9b0.js";const D={components:{InputGroup:N,ButtonBase:S},setup(){const t=()=>({companyName:"",contactName:"",emailAdress:"",phoneNumber:""});return{v$:f(),getInitialFormData:t}},data(){return{companySettings:C(this.getInitialFormData()),companyData:{},companyAllData:{}}},mounted(){_.GetCompanyById().then(t=>{this.companyData=t.data.data.companyId,this.companyAllData=t.data.data,this.getCompanyData(this.companyAllData)})},validations(){return{companySettings:{companyName:{required:r.withMessage(i.company_name,c)},contactName:{required:r.withMessage(i.contact_name_required,c)},emailAdress:{required:r.withMessage(i.email_required,c),email:r.withMessage(i.email_valid,b)},phoneNumber:{required:r.withMessage(i.phoneNumber_required,c)}}}},methods:{phonemask(){document.getElementById("phone").addEventListener("input",function(t){var e=t.target.value.replace(/\D/g,"").match(/(\d{0,3})(\d{0,3})(\d{0,4})/);t.target.value=e[2]?"("+e[1]+") "+e[2]+(e[3]?"-"+e[3]:""):e[1]})},sendWithoutMask(t){return t.replace(/\D/g,"").match(/(\d{0,3})(\d{0,3})(\d{0,4})/)[0]},getPhoneMask(t){let e=t.replace(/\D/g,"").match(/(\d{0,3})(\d{0,3})(\d{0,4})/);return e[2]?"("+e[1]+") "+e[2]+(e[3]?"-"+e[3]:""):e[1]},getBody(){const t=this.companySettings;return{companyId:this.companyData,companyName:t.companyName,contactName:t.contactName,phoneNumber:this.sendWithoutMask(t.phoneNumber),emailAddress:t.emailAdress}},getCompanyData(t){this.v$.companySettings.companyName.$model=t.companyName,this.v$.companySettings.contactName.$model=t.contactName,this.v$.companySettings.phoneNumber.$model=this.getPhoneMask(t.phoneNumber),this.v$.companySettings.emailAdress.$model=t.emailAddress},handleSubmit(){if(this.v$.$touch(),this.v$.$invalid)this.submitStatus="ERROR";else{const t=this.getBody();_.UpdateCompanyInfo(t).then(e=>{A().success(e,{timeout:3e3}),this.v$.$reset()})}}}},M={class:"CompanyInfoView"},w={class:"form"},x={class:"__leading"},q={class:"error-msg"},E={class:"__leading"},U={class:"error-msg"},F={class:"__leading"},G={class:"error-msg"},P={class:"__leading"},L={class:"error-msg"},R=B(" Save Changes ");function z(t,e,T,o,W,y){const d=v("InputGroup"),$=v("ButtonBase");return n(),m("div",M,[s("div",w,[s("form",{onSubmit:e[5]||(e[5]=I((...a)=>t.submitSave&&t.submitSave(...a),["prevent"])),autocomplete:"on"},[s("div",{class:p(["form-items",{error:o.v$.companySettings.companyName.$errors.length}])},[s("div",x,[l(d,{label:"Company Name *","input-props":{placeholder:"Company Name",maxlength:"155"},modelValue:o.v$.companySettings.companyName.$model,"onUpdate:modelValue":e[0]||(e[0]=a=>o.v$.companySettings.companyName.$model=a),modelModifiers:{trim:!0}},null,8,["modelValue"]),(n(!0),m(u,null,h(o.v$.companySettings.companyName.$errors,a=>(n(),m("div",{class:"input-errors",key:a.$uid},[s("div",q,g(a.$message),1)]))),128))])],2),s("div",{class:p(["form-items",{error:o.v$.companySettings.contactName.$errors.length}])},[s("div",E,[l(d,{label:"Contact Name *","input-props":{placeholder:"Contact Name",maxlength:"70"},modelValue:o.v$.companySettings.contactName.$model,"onUpdate:modelValue":e[1]||(e[1]=a=>o.v$.companySettings.contactName.$model=a),modelModifiers:{trim:!0}},null,8,["modelValue"]),(n(!0),m(u,null,h(o.v$.companySettings.contactName.$errors,a=>(n(),m("div",{class:"input-errors",key:a.$uid},[s("div",U,g(a.$message),1)]))),128))])],2),s("div",{class:p(["form-items",{error:o.v$.companySettings.emailAdress.$errors.length}])},[s("div",F,[l(d,{label:"Email Address *","input-props":{placeholder:"Email Address"},modelValue:o.v$.companySettings.emailAdress.$model,"onUpdate:modelValue":e[2]||(e[2]=a=>o.v$.companySettings.emailAdress.$model=a),modelModifiers:{trim:!0}},null,8,["modelValue"]),(n(!0),m(u,null,h(o.v$.companySettings.emailAdress.$errors,a=>(n(),m("div",{class:"input-errors",key:a.$uid},[s("div",G,g(a.$message),1)]))),128))])],2),s("div",{class:p(["form-items",{error:o.v$.companySettings.phoneNumber.$errors.length}])},[s("div",P,[l(d,{label:"Phone Number *",onKeydown:e[3]||(e[3]=a=>y.phonemask()),"input-props":{placeholder:"Phone Number",type:"text",maxlength:14,id:"phone"},modelValue:o.v$.companySettings.phoneNumber.$model,"onUpdate:modelValue":e[4]||(e[4]=a=>o.v$.companySettings.phoneNumber.$model=a),modelModifiers:{trim:!0}},null,8,["modelValue"]),(n(!0),m(u,null,h(o.v$.companySettings.phoneNumber.$errors,a=>(n(),m("div",{class:"input-errors",key:a.$uid},[s("div",L,g(a.$message),1)]))),128))])],2)],32)]),l($,{class:"btn-action",onClick:y.handleSubmit},{default:k(()=>[R]),_:1},8,["onClick"])])}var Z=V(D,[["render",z],["__scopeId","data-v-3605b937"]]);export{Z as default};
