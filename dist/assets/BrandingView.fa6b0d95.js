import{_ as R,z as W,u as X,o as d,c as u,a as t,t as w,w as T,n as g,O as $,ac as j,e as L,F as B,f as E,p as K,i as F,j as C,q as m,r as G,N as Y,b as z,d as f,h as q,B as O,M as ee,g as te,R as ae,E as se,I as le}from"./index.07cdec20.js";/* empty css                                                              */import"./moment.b66b9923.js";/* empty css                                                                *//* empty css                                                                */import{D as oe}from"./vue3-loading-overlay.51646cde.js";import{u as ne,c as x,m as P,r as H,e as re}from"./messages.d52f21eb.js";import{u as S}from"./companySettings.service.6df5152f.js";import{_ as de}from"./main.f0ba9a92.js";import{f as ie,P as ue}from"./Pagination.1b6dd668.js";import"./createProject.service.d5875826.js";import"./http.5479f9b0.js";const me={name:"AddUserModal",emits:["close","closeNo"],props:{userId:{type:Number},editUserData:{type:Object}},setup(){const e=()=>({fname:"",lname:"",email:""});return{v$:ne(),getInitialFormData:e}},data(){return{addUser:W(this.getInitialFormData()),editUserData:this.editUserData}},watch:{editUserData:function(){this.addUser.fname=this.editUserData.firstName,this.addUser.lname=this.editUserData.lastName,this.addUser.email=this.editUserData.email}},validations(){return{addUser:{fname:{required:x.withMessage(P.firstName_required,H)},lname:{required:x.withMessage(P.lastName_required,H)},email:{required:x.withMessage(P.email_required,H),email:x.withMessage(P.email_valid,re)}}}},methods:{nameKeydown(e){/[a-zA-Z0-9\s.'-]+$/.test(e.key)||e.preventDefault()},noSpace(e){return e==this.addUser.fname?this.addUser.fname=e.replace(/ /g,""):this.addUser.lname=e.replace(/ /g,"")},getBody(){var s;const e=this.addUser;return{userId:(s=this.userId)!=null?s:null,firstName:e.fname,lastName:e.lname,email:e.email,HostName:window.location.host}},handleSubmit(){if(this.v$.$touch(),this.v$.$invalid)this.submitStatus="ERROR";else{const e=this.getBody();S.AddCompanyUser(e).then(s=>{X().success(s,{timeout:3e3}),this.v$.$reset(),Object.assign(this.addUser,this.getInitialFormData()),this.$emit("close")}).catch(()=>{})}},handleClose(){this.v$.$reset(),Object.assign(this.addUser,this.getInitialFormData()),this.$emit("closeNo")}}},N=e=>(K("data-v-6078ed8c"),e=e(),F(),e),ce={class:"custom-model"},ve={class:"modal__content"},pe={class:"modal-header"},_e={class:"modal__title"},ge=N(()=>t("span",{class:"modal_subtitle"},"Needs updated text",-1)),fe={class:"close-button"},he=N(()=>t("span",null,[t("img",{src:de,alt:"close"})],-1)),Ue=[he],be={class:"content-part"},we={class:"portal-new-form"},ye=N(()=>t("label",null,[C("First Name "),t("span",null,"*")],-1)),Se={class:"error-msg"},$e=N(()=>t("label",null,[C("Last Name "),t("span",null,"*")],-1)),Ce={class:"error-msg"},Ne=N(()=>t("label",null,[C("Email Address "),t("span",null,"*")],-1)),De={class:"error-msg"},Ie={class:"btn-action-wrape"};function Me(e,s,p,n,v,o){return d(),u("div",ce,[t("div",ve,[t("div",pe,[t("span",_e,w(p.userId?"Update User":"Add New User"),1),ge,t("div",fe,[t("button",{type:"button",class:"close-btn",onClick:s[0]||(s[0]=(...a)=>o.handleClose&&o.handleClose(...a))},Ue)])]),t("div",be,[t("div",we,[t("form",{onSubmit:s[10]||(s[10]=T((...a)=>o.handleSubmit&&o.handleSubmit(...a),["prevent"]))},[t("div",{class:g(["form-group",{error:n.v$.addUser.fname.$errors.length}])},[ye,$(t("input",{type:"text",class:"form-control no_space",onBlur:s[1]||(s[1]=a=>o.noSpace(v.addUser.fname)),onKeydown:[s[2]||(s[2]=L(T(()=>{},["prevent"]),["space"])),s[3]||(s[3]=a=>o.nameKeydown(a))],"onUpdate:modelValue":s[4]||(s[4]=a=>n.v$.addUser.fname.$model=a),placeholder:"First Name",maxlength:"35"},null,544),[[j,n.v$.addUser.fname.$model,void 0,{trim:!0}]]),(d(!0),u(B,null,E(n.v$.addUser.fname.$errors,a=>(d(),u("div",{class:"input-errors",key:a.$uid},[t("div",Se,w(a.$message),1)]))),128))],2),t("div",{class:g(["form-group",{error:n.v$.addUser.lname.$errors.length}])},[$e,$(t("input",{type:"text",class:"form-control",onBlur:s[5]||(s[5]=a=>o.noSpace(v.addUser.lname)),onKeydown:[s[6]||(s[6]=L(T(()=>{},["prevent"]),["space"])),s[7]||(s[7]=a=>o.nameKeydown(a))],"onUpdate:modelValue":s[8]||(s[8]=a=>n.v$.addUser.lname.$model=a),placeholder:"Last Name",maxlength:"35"},null,544),[[j,n.v$.addUser.lname.$model,void 0,{trim:!0}]]),(d(!0),u(B,null,E(n.v$.addUser.lname.$errors,a=>(d(),u("div",{class:"input-errors",key:a.$uid},[t("div",Ce,w(a.$message),1)]))),128))],2),t("div",{class:g(["form-group",{error:n.v$.addUser.email.$errors.length}])},[Ne,$(t("input",{type:"text",class:"form-control","onUpdate:modelValue":s[9]||(s[9]=a=>n.v$.addUser.email.$model=a),placeholder:"Email Address",maxlength:"255"},null,512),[[j,n.v$.addUser.email.$model,void 0,{trim:!0}]]),(d(!0),u(B,null,E(n.v$.addUser.email.$errors,a=>(d(),u("div",{class:"input-errors",key:a.$uid},[t("div",De,w(a.$message),1)]))),128))],2)],32)])]),t("div",Ie,[t("button",{type:"button",class:"dlt-btn",onClick:s[11]||(s[11]=(...a)=>o.handleClose&&o.handleClose(...a))},"Cancel"),t("button",{class:"btn-action",onClick:s[12]||(s[12]=(...a)=>o.handleSubmit&&o.handleSubmit(...a))},w(p.userId?"Update User":"Add User"),1)])])])}var J=R(me,[["render",Me],["__scopeId","data-v-6078ed8c"]]);const Q=e=>(K("data-v-0bc26038"),e=e(),F(),e),ke={class:"__cell __cell-link",style:{"min-width":"119px"}},Ae=["id"],Ve=Q(()=>t("span",{class:"edit_icon"},null,-1)),xe=[Ve],Pe=Q(()=>t("span",{class:"delete_icon"},null,-1)),Be=[Pe],Ee={class:"portal-modal"},Re={key:"header-link"},Te={__name:"UserTableRow",props:{portal:{type:Object,default:Object},isHeaderRow:{type:Boolean,default:!1},activeSortKey:{type:String,default:""},isSortDescending:{type:Boolean,default:!1}},emits:["sort"],setup(e,{emit:s}){const p=e;m(p.portal.projectStages?p.portal.projectStages:[]);const n=m({}),v=m(!1),o=m(!1),a=m(!1),D=()=>{o.value=!0},h=()=>{o.value=!1,s("updateData")},U=()=>{o.value=!1},y=_=>{S.GetUserById(_).then(l=>{n.value=l.data.data,console.log(n.value)}),a.value=!0},b=()=>{a.value=!1,s("updateData")},I=()=>{a.value=!1},M=_=>{s("sort",_)},k=_=>_===p.activeSortKey,A=_=>{_.length>25&&(v.value=!0)},V=_=>{_.length>25&&(v.value=!1)};return(_,l)=>{const i=G("vue-final-modal"),c=Y("tooltip");return d(),u("div",{class:g(["PortalsTableRow",{isHeaderRow:e.isHeaderRow,isSortDescending:e.isSortDescending}])},[t("div",{class:g(["__cell __cell-customer isSortable",{isActive:k("Name")}])},[$((d(),u("span",{class:g(v.value?"tooltip":""),onMouseenter:l[0]||(l[0]=r=>A(e.portal.name)),onMouseleave:l[1]||(l[1]=r=>V(e.portal.name))},[C(w(e.portal.name),1)],34)),[[c,e.portal.name]]),e.isHeaderRow?(d(),u("div",{key:"header-customer",onClick:l[2]||(l[2]=r=>M("Name"))}," Name ")):z("",!0)],2),t("div",{class:g(["__cell __cell-email isSortable",{isActive:k("Email")}])},[$((d(),u("span",{class:g(v.value?"tooltip":""),onMouseenter:l[3]||(l[3]=r=>A(e.portal.emailAddress)),onMouseleave:l[4]||(l[4]=r=>V(e.portal.emailAddress))},[C(w(e.portal.emailAddress),1)],34)),[[c,e.portal.emailAddress]]),e.isHeaderRow?(d(),u("div",{key:"header-email",onClick:l[5]||(l[5]=r=>M("Email"))}," Email ")):z("",!0)],2),t("div",ke,[e.isHeaderRow?(d(),u("div",Re)):(d(),u("div",{class:"action-link setting-non",key:"link",id:`${e.portal.projectStageId}id`,name:"setting"},[t("button",{class:"action-btn",type:"button",onClick:l[6]||(l[6]=r=>y(e.portal.userId))},xe),t("button",{class:"action-btn",type:"button",onClick:D},Be),f(i,{modelValue:a.value,"onUpdate:modelValue":l[7]||(l[7]=r=>a.value=r),name:"user-edit",classes:"modal-container","click-to-close":!1,"content-class":"modal-content"},{default:q(()=>[t("div",Ee,[f(J,{onClose:b,onCloseNo:I,editUserModal:a.value,editUserData:n.value,userId:e.portal.userId},null,8,["editUserModal","editUserData","userId"])])]),_:1},8,["modelValue"]),f(i,{classes:"modal-container","content-class":"modal-content",name:"user-delete-modal",modelValue:o.value,"onUpdate:modelValue":l[8]||(l[8]=r=>o.value=r),"click-to-close":!1},{default:q(()=>[f(oe,{onClose:h,onCloseNo:U,projectId:e.portal.userId,projectName:"userTable"},null,8,["projectId"])]),_:1},8,["modelValue"])],8,Ae))])],2)}}};var Z=R(Te,[["__scopeId","data-v-0bc26038"]]);const je=e=>(K("data-v-b8812fac"),e=e(),F(),e),He={class:"PortalsTable"},qe={class:"__rows row-custom"},Ke={class:"__empty"},Fe=je(()=>t("svg",{width:"25",height:"24",viewBox:"0 0 25 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[t("path",{d:"M12.3333 8.38888V12M12.3333 12V15.6111M12.3333 12H15.9444M12.3333 12H8.72222M23.1667 12C23.1667 17.9831 18.3164 22.8333 12.3333 22.8333C6.35025 22.8333 1.5 17.9831 1.5 12C1.5 6.0169 6.35025 1.16666 12.3333 1.16666C18.3164 1.16666 23.1667 6.0169 23.1667 12Z",stroke:"#113A6B","stroke-width":"2.225","stroke-linecap":"round","stroke-linejoin":"round"})],-1)),Le=C(" Add User "),ze=[Fe,Le],Oe={__name:"UserTable",props:{portals:{type:Array,required:!0,formData:{type:Array,default:[]}}},setup(e){const s=e;let p=m(1);const n=m([]),v=m(1),o=m(),a=m(ie.perPageData),D=m(1),h=m("Name"),U=m(!1),y=m(!0),b=m(!1);O(()=>s.portals),ee(()=>{const l={pageNumber:D.value,pageSize:a.value,sortingColumnName:h.value,orderDirection:y.value?"ASC":"DESC"};S.UserListing(l).then(i=>{n.value=i.data.items,v.value=i.data.totalPages,o.value=i.data.totalItems})});const I=()=>{const l={pageNumber:1,pageSize:a.value,sortingColumnName:h.value,orderDirection:y.value?"ASC":"DESC"};S.UserListing(l).then(i=>{const c=i.data;n.value=c.items,p.value=1,v.value=c.totalPages,o.value=c.totalItems})};n.value=O(()=>s.portals);const M=l=>{const i={pageNumber:1,pageSize:a.value,sortingColumnName:l,orderDirection:U.value?"ASC":"DESC"};h.value=l,S.UserListing(i).then(c=>{n.value=c.data.items,v.value=c.data.totalPages,p.value=1,o.value=c.data.totalItems,o.value=c.data.totalItems,y.value=U.value,U.value=!U.value})},k=async l=>{const i=m(!0);i.value=!1,D.value=l;const c={pageNumber:l,pageSize:a.value,sortingColumnName:h.value,orderDirection:y.value?"ASC":"DESC"};S.UserListing(c).then(r=>{n.value=r.data.items,p.value=r.data.pageNumber,v.value=r.data.totalPages,o.value=r.data.totalItems}),i.value=!1,await le(),i.value=!0},A=()=>{b.value=!0},V=()=>{b.value=!1,I()},_=()=>{b.value=!1};return(l,i)=>{const c=G("vue-final-modal");return d(),u("div",He,[t("div",qe,[f(Z,{class:"__header-row","is-header-row":!0,"active-sort-key":h.value,"is-sort-descending":U.value,onSort:M},null,8,["active-sort-key","is-sort-descending"]),(d(!0),u(B,null,E(n.value,r=>(d(),te(Z,{class:"__row",onUpdateData:I,portal:r,key:r},null,8,["portal"]))),128))]),$(t("div",Ke," No results found ",512),[[ae,!n.value.length]]),t("div",null,[f(ue,{pageName:"Users",totalPages:v.value,perPage:a.value,totalItems:o.value,currentPage:se(p),onPagechanged:k},null,8,["totalPages","perPage","totalItems","currentPage"])]),t("div",{class:g(["user-btn-main",o.value>10?"":"toggle_class"])},[t("button",{class:"user-btn",onClick:A},ze),f(c,{classes:"modal-container","content-class":"modal-content",name:"user-modal",modelValue:b.value,"onUpdate:modelValue":i[0]||(i[0]=r=>b.value=r),"click-to-close":!1},{default:q(()=>[f(J,{onClose:V,onCloseNo:_})]),_:1},8,["modelValue"])],2)])}}};var Ze=R(Oe,[["__scopeId","data-v-b8812fac"]]);const Ge={class:"BrandingView"},Je={__name:"BrandingView",setup(e){return(s,p)=>(d(),u("div",Ge,[f(Ze)]))}};var dt=R(Je,[["__scopeId","data-v-684593da"]]);export{dt as default};
