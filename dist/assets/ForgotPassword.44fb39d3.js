import{I as S}from"./InputGroup.289a36f5.js";import{B as y}from"./ButtonBase.34bd080f.js";import{u as F,c as h,m as p,r as b,e as B}from"./messages.d52f21eb.js";import{_ as M,af as _,r as g,o,c as a,a as n,t as m,b as d,w as k,n as E,d as u,e as R,F as $,f as x,h as v,p as I,i as V,j as w}from"./index.07cdec20.js";import"./InputText.386db282.js";/* empty css                                                              */const C={components:{InputGroup:S,ButtonBase:y},setup(){return{v$:F()}},data(){return{loginForm:{email:""},submitStatus:null,showPassword:!1,errorMsg:!1,successMsg:null,terms:"http://www.portalcx.io/terms-and-conditions",privacy:"http://www.portalcx.io/privacy-policy",emailSent:!1}},validations(){return{loginForm:{email:{required:h.withMessage(p.email_required,b),email:h.withMessage(p.email_valid,B)}}}},methods:{handleSubmit(){if(this.v$.$touch(),this.v$.$invalid)this.submitStatus="ERROR";else{const s={email:this.loginForm.email,hostName:window.location.host};_.SendForgotPasswordEmail(s).then(e=>{e.status==200&&(this.emailSent=!0,this.errorMsg=!1,this.successMsg=" Thank you! An email to reset your password has been sent.")}).catch(e=>{e.response.status===400&&(this.errorMsg=e.response.data.Errors[0])})}},handleResentEmail(){if(this.v$.$touch(),this.v$.$invalid)this.submitStatus="ERROR";else{const s={email:this.loginForm.email,hostName:window.location.host};_.SendForgotPasswordEmail(s).then(e=>{e.status==200&&(this.emailSent=!0,this.successMsg=" Thank you! An email to reset your password has been resent.",this.errorMsg=!1)}).catch(e=>{console.log(e.response),e.response.status===400&&(this.errorMsg=e.Errors[0])})}}}},P=s=>(I("data-v-3dee7d94"),s=s(),V(),s),N={class:"SignInView"},q={class:"Form"},A=P(()=>n("div",{class:"__title"}," Forgot Password ",-1)),G={key:0,class:"toster-msg"},T={class:"error-msg"},K=w(" Send Password Reset "),O={key:2,class:"resend-email-wrapper"},j={class:"thankyou-text"},z=w(" Resent Email ");function D(s,e,L,l,r,i){const f=g("InputGroup"),c=g("ButtonBase");return o(),a("div",N,[n("div",q,[A,r.errorMsg?(o(),a("span",G,m(r.errorMsg),1)):d("",!0),r.emailSent?d("",!0):(o(),a("form",{key:1,onSubmit:e[2]||(e[2]=k((...t)=>i.handleSubmit&&i.handleSubmit(...t),["prevent"]))},[n("div",{class:E(["inputs",{error:l.v$.loginForm.email.$errors.length}])},[u(f,{label:"Email Address",onKeyup:e[0]||(e[0]=R(t=>i.handleSubmit(),["enter"])),modelValue:l.v$.loginForm.email.$model,"onUpdate:modelValue":e[1]||(e[1]=t=>l.v$.loginForm.email.$model=t),"input-props":{placeholder:"Email"}},null,8,["modelValue"]),(o(!0),a($,null,x(l.v$.loginForm.email.$errors,t=>(o(),a("div",{class:"input-errors",key:t.$uid},[n("div",T,m(t.$message),1)]))),128))],2),u(c,{class:"__ButtonBase",onClick:i.handleSubmit},{default:v(()=>[K]),_:1},8,["onClick"])],32)),r.emailSent?(o(),a("div",O,[n("span",j,m(r.successMsg),1),u(c,{class:"__ButtonBase",onClick:i.handleResentEmail},{default:v(()=>[z]),_:1},8,["onClick"])])):d("",!0)])])}var Y=M(C,[["render",D],["__scopeId","data-v-3dee7d94"]]);export{Y as default};
